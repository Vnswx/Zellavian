export function generateLangCard(data, theme = "radical") {
    const themes = {
      radical: { bg: "#141321", text: "#ffffff", title: "#fe428e" },
      dark: { bg: "#0d1117", text: "#c9d1d9", title: "#58a6ff" }
    };
  
    const t = themes[theme] || themes.radical;
  
    // Konversi object â†’ array
    const langs = Object.entries(data.languages);
  
    // Total bytes
    const total = langs.reduce((sum, [, bytes]) => sum + bytes, 0);
  
    // Hitung persen + sort
    const langData = langs
      .map(([lang, bytes]) => ({
        lang,
        percent: (bytes / total) * 100,
      }))
      .sort((a, b) => b.percent - a.percent);
  
    // Warna duri
    const thornColors = [
      "#575757",
      "#948979",
      "#053B15",
      "#A27B5C",
      "#575757"
    ];
  
    langData.forEach((item, i) => {
      item.color = thornColors[i % thornColors.length];
    });
  
    // =============================
    //    DYNAMIC THORN GENERATOR
    // =============================
  
    // GANTI path ini dengan path SVG asli dari Figma!
    const basePath = "M52 37C54 39 54 39 54.125 42.125C54.0837 43.0738 54.0425 44.0225 54 45C55.98 44.67 57.96 44.34 60 44C60 42.35 60 40.7 60 39C60.66 39 61.32 39 62 39C62.66 40.65 63.32 42.3 64 44C64.33 43.34 64.66 42.68 65 42C65.99 42 66.98 42 68 42C68 42.66 68 43.32 68 44C69.98 44 71.96 44 74 44C74.66 42.68 75.32 41.36 76 40C76.99 40 77.98 40 79 40C79 41.65 79 43.3 79 45C78.34 45 77.68 45 77 45C77.66 46.65 78.32 48.3 79 50C80.65 49.01 82.3 48.02 84 47C84 49.64 84 52.28 84 55C84.99 54.67 85.98 54.34 87 54C87.3506 54.66 87.7012 55.32 88.0625 56C89.9656 58.411 89.9656 58.411 93.6875 58.25C94.7806 58.1675 95.8737 58.085 97 58C96.505 59.485 96.505 59.485 96 61C95.34 60.67 94.68 60.34 94 60C93.67 60.66 93.34 61.32 93 62C92.34 61.67 91.68 61.34 91 61C91.495 61.99 91.495 61.99 92 63C93.98 62.67 95.96 62.34 98 62C97.505 63.485 97.505 63.485 97 65C95.6667 65.3333 94.3333 65.6667 93 66C92.505 67.485 92.505 67.485 92 69C93.98 68.01 95.96 67.02 98 66C96.25 69.875 96.25 69.875 94 71C94.9473 73.1581 94.9473 73.1581 97 75C96.67 75.33 96.34 75.66 96 76C96.4093 78.054 96.4093 78.054 97 80C97.66 80 98.32 80 99 80C99 80.66 99 81.32 99 82C100.485 82.495 100.485 82.495 102 83C99.5094 83.6871 97.6211 84 95 84C94.34 85.32 93.68 86.64 93 88C94.65 88.33 96.3 88.66 98 89C98 89.99 98 90.98 98 92C95.69 92 93.38 92 91 92C91 93.32 91 94.64 91 96C91.66 96.33 92.32 96.66 93 97C93 97.66 93 98.32 93 99C91.68 99.33 90.36 99.66 89 100C89 100.66 89 101.32 89 102C89.66 102.66 90.32 103.32 91 104C91.625 106.125 91.625 106.125 92 108C90.02 106.35 88.04 104.7 86 103C84.02 103.99 84.02 103.99 82 105C81.7226 108.185 81.7226 108.185 84 111C81.1875 111.625 81.1875 111.625 78 112C77.01 111.34 76.02 110.68 75 110C73.7937 112.332 72.8345 114.496 72 117C71.01 116.34 70.02 115.68 69 115C69 116.65 69 118.3 69 120C67 118 67 118 66.875 114.875C66.9163 113.926 66.9575 112.978 67 112C64.03 112.495 64.03 112.495 61 113C61 114.32 61 115.64 61 117C60.4225 116.67 59.845 116.34 59.25 116C56.8012 114.729 56.8012 114.729 53 115C53 114.34 53 113.68 53 113C49.0623 112.634 47.4346 112.698 44.125 115C43.4237 115.66 42.7225 116.32 42 117C42 115.35 42 113.7 42 112C42.66 112 43.32 112 44 112C43.34 110.35 42.68 108.7 42 107C40.0246 107.348 40.0246 107.348 38 108C37.67 108.66 37.34 109.32 37 110C37 107.36 37 104.72 37 102C35.515 102.495 35.515 102.495 34 103C33.6494 102.34 33.2988 101.68 32.9375 101C31.0344 98.589 31.0344 98.589 27.3125 98.75C26.2194 98.8325 25.1263 98.915 24 99C24.33 98.01 24.66 97.02 25 96C25.66 96.33 26.32 96.66 27 97C27.33 96.34 27.66 95.68 28 95C26.35 95 24.7 95 23 95C23.33 94.01 23.66 93.02 24 92C26.0625 91.3125 26.0625 91.3125 28 91C27.67 90.34 27.34 89.68 27 89C25.68 89.66 24.36 90.32 23 91C24.75 87.125 24.75 87.125 27 86C26.0527 83.8419 26.0527 83.8419 24 82C24.495 81.505 24.495 81.505 25 81C24.5907 78.946 24.5907 78.946 24 77C23.34 77 22.68 77 22 77C22 76.34 22 75.68 22 75C21.01 74.67 20.02 74.34 19 74C22.0526 73.0188 23.9474 73.0188 27 74C26.34 72.02 25.68 70.04 25 68C24.34 68 23.68 68 23 68C22.67 66.68 22.34 65.36 22 64C24.64 64.33 27.28 64.66 30 65C30 63.68 30 62.36 30 61C29.34 60.67 28.68 60.34 28 60C28 59.34 28 58.68 28 58C29.32 57.67 30.64 57.34 32 57C32 56.34 32 55.68 32 55C31.34 54.34 30.68 53.68 30 53C29.375 50.875 29.375 50.875 29 49C30.98 50.65 32.96 52.3 35 54C36.32 53.34 37.64 52.68 39 52C39.2774 48.8151 39.2774 48.8151 37 46C39.8125 45.375 39.8125 45.375 43 45C43.99 45.66 44.98 46.32 46 47C47.2063 44.6679 48.1655 42.5036 49 40C49.99 40.66 50.98 41.32 52 42C52 40.35 52 38.7 52 37ZM50 46C50 46.99 50 47.98 50 49C50.66 48.34 51.32 47.68 52 47C51.34 46.67 50.68 46.34 50 46ZM70 46C69.67 46.99 69.34 47.98 69 49C70.32 48.34 71.64 47.68 73 47C72.01 46.67 71.02 46.34 70 46ZM66 47C65.67 47.66 65.34 48.32 65 49C65.99 49 66.98 49 68 49C68 48.34 68 47.68 68 47C67.34 47 66.68 47 66 47ZM55 47C52.8568 49.3146 52.0237 50.4894 51.875 53.6875C51.9163 54.4506 51.9575 55.2138 52 56C51.67 56.33 51.34 56.66 51 57C50.34 55.68 49.68 54.36 49 53C45.4548 54.3976 45.4548 54.3976 42 56C42.33 57.98 42.66 59.96 43 62C40.4892 60.7446 40.1287 59.4994 39 57C38.34 57.66 37.68 58.32 37 59C37 59.99 37 60.98 37 62C37.66 62 38.32 62 39 62C39 62.66 39 63.32 39 64C38.01 63.67 37.02 63.34 36 63C37.0002 66.0005 38.3373 68.3252 40 71C39.2369 70.3194 38.4737 69.6388 37.6875 68.9375C36.8006 68.2981 35.9137 67.6587 35 67C34.01 67.33 33.02 67.66 32 68C31.67 68.99 31.34 69.98 31 71C32.65 72.65 34.3 74.3 36 76C34.35 75.67 32.7 75.34 31 75C30.67 75.66 30.34 76.32 30 77C30.66 77.66 31.32 78.32 32 79C32 79.66 32 80.32 32 81C32.7529 83.5905 32.7529 83.5905 34 86C34.99 86.33 35.98 86.66 37 87C35.35 87 33.7 87 32 87C32.33 87.99 32.66 88.98 33 90C34.98 90.33 36.96 90.66 39 91C38.01 91.99 37.02 92.98 36 94C36.99 94.99 37.98 95.98 39 97C39.99 96.505 39.99 96.505 41 96C40.67 96.99 40.34 97.98 40 99C44.9551 100.964 44.9551 100.964 50 100C50.99 99.505 50.99 99.505 52 99C52.33 101.31 52.66 103.62 53 106C57.4261 107.445 57.4261 107.445 62 108C62.1856 107.041 62.1856 107.041 62.375 106.062C62.5812 105.382 62.7875 104.701 63 104C63.66 103.67 64.32 103.34 65 103C65 105.31 65 107.62 65 110C67.1042 108.314 67.1042 108.314 69 106C69.2507 103.374 69.2507 103.374 69 101C69.33 100.67 69.66 100.34 70 100C70.66 101.32 71.32 102.64 72 104C74.97 103.505 74.97 103.505 78 103C78.9812 99.9474 78.9812 98.0526 78 95C80.5108 96.2554 80.8713 97.5006 82 100C82.66 99.34 83.32 98.68 84 98C84 97.01 84 96.02 84 95C83.34 95 82.68 95 82 95C82 94.34 82 93.68 82 93C82.99 93.33 83.98 93.66 85 94C83.7962 91.5064 82.5457 89.3186 81 87C81.7631 87.33 82.5263 87.66 83.3125 88C85.9907 89.1744 85.9907 89.1744 89 89C89.33 88.01 89.66 87.02 90 86C88.35 84.35 86.7 82.7 85 81C86.32 81.33 87.64 81.66 89 82C89.5907 80.054 89.5907 80.054 90 78C89.67 77.67 89.34 77.34 89 77C88.7113 76.01 88.4225 75.02 88.125 74C87.7537 73.01 87.3825 72.02 87 71C86.01 70.67 85.02 70.34 84 70C85.65 70 87.3 70 89 70C88.505 68.515 88.505 68.515 88 67C86.02 66.67 84.04 66.34 82 66C82.66 65.34 83.32 64.68 84 64C83.34 63.01 82.68 62.02 82 61C81.34 61 80.68 61 80 61C80.33 60.01 80.66 59.02 81 58C77.3803 56.6837 74.9043 56 71 56C71 56.66 71 57.32 71 58C70.34 58 69.68 58 69 58C68.505 54.535 68.505 54.535 68 51C63.5739 49.5548 63.5739 49.5548 59 49C59 50.32 59 51.64 59 53C58.01 53.33 57.02 53.66 56 54C56 51.69 56 49.38 56 47C55.67 47 55.34 47 55 47ZM71 51C71.33 51.99 71.66 52.98 72 54C72.99 53.34 73.98 52.68 75 52C75 51.34 75 50.68 75 50C72.9255 49.8509 72.9255 49.8509 71 51ZM86 58C86.99 59.485 86.99 59.485 88 61C88 60.01 88 59.02 88 58C87.34 58 86.68 58 86 58ZM86 63C86.33 63.66 86.66 64.32 87 65C87.33 64.34 87.66 63.68 88 63C87.34 63 86.68 63 86 63ZM27 69C28 71 28 71 28 71L27 69ZM91 73C92 75 92 75 92 75L91 73ZM27 76C27.33 77.32 27.66 78.64 28 80C28.33 79.01 28.66 78.02 29 77C28.34 76.67 27.68 76.34 27 76ZM93 77C92.67 77.99 92.34 78.98 92 80C92.99 80.495 92.99 80.495 94 81C93.67 79.68 93.34 78.36 93 77ZM29 82C30 84 30 84 30 84L29 82ZM34 92C33.67 92.66 33.34 93.32 33 94C33.66 94 34.32 94 35 94C34.67 93.34 34.34 92.68 34 92ZM33 96C33 96.99 33 97.98 33 99C33.66 98.67 34.32 98.34 35 98C34.34 97.34 33.68 96.68 33 96ZM48 103C47.34 104.32 46.68 105.64 46 107C47.32 106.67 48.64 106.34 50 106C49.67 105.01 49.34 104.02 49 103C48.67 103 48.34 103 48 103ZM76 107C77 109 77 109 77 109L76 107ZM53 108C53 108.66 53 109.32 53 110C53.99 109.67 54.98 109.34 56 109C55.01 108.67 54.02 108.34 53 108ZM70 108C70 108.99 70 109.98 70 111C70.66 110.34 71.32 109.68 72 109C71.34 108.67 70.68 108.34 70 108ZM79 108C79 108.66 79 109.32 79 110C79.66 109.67 80.32 109.34 81 109C80.34 108.67 79.68 108.34 79 108ZM57 112C58 114 58 114 58 114L57 112Z";
  
    const totalThorns = langData.length;
    const rotationStep = 360 / totalThorns;
  
    const thornSVG = `
      <g id="thorns" opacity="0.85" transform="translate(20, 55)">
        ${langData.map((item, i) => `
          <path
            d="${basePath}"
            fill="none"
            stroke="${item.color}"
            stroke-width="10"
            stroke-linecap="round"
            transform="rotate(${i * rotationStep} 100 80)"
          />
        `).join("")}
      </g>
    `;
  
    // =============================
    //        LABELS
    // =============================
    const labels = langData.map((item, i) => `
      <rect x="230" y="${60 + i * 26}" width="14" height="14" fill="${item.color}" rx="3"/>
      <text x="250" y="${71 + i * 26}" font-size="15" fill="${t.text}">
        ${item.lang}
      </text>
    `).join("");
  
    const height = 80 + langData.length * 30;
  
    return `
      <svg width="420" height="${height}" xmlns="http://www.w3.org/2000/svg">
        
        <rect width="100%" height="100%" fill="${t.bg}" rx="15" />
  
        <text x="25" y="35" font-size="22" fill="${t.title}" font-weight="bold"
          style="font-family: 'Jacquard 12';">
          Most Used Languages
        </text>
  
        ${thornSVG}
  
        ${labels}
  
      </svg>
    `;
  }
  